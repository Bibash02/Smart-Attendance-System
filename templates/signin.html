{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Smart Attendance System</title>
    <link rel="stylesheet" href="{% static 'css/signin.css' %}">
</head>
<body>

<div class="auth-container">
    <div class="card">
    <div class="logo">
        <div class="logo-icon">SA</div>
        <h1>Smart Attendance</h1>
        <p>Secure & Intelligent Tracking</p>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="switchTab(event, 'login')">Login</button>
        <button class="tab" onclick="switchTab(event, 'teacherRegister')">Teacher Register</button>
        <button class="tab" onclick="switchTab(event, 'studentRegister')">Student Register</button>
    </div>

    <div class="form-container">

        <!-- ================= LOGIN FORM ================= -->
        <form id="loginForm" method="POST" action="{% url 'login' %}" class="form active">
            {% csrf_token %}

            {% if login_error %}
                <p class="error">{{ login_error }}</p>
            {% endif %}

            {% for message in messages %}
                <p class="error">{{ message }}</p>
            {% endfor %}

            <div class="form-group">
                <label>Email / Username</label>
                <input type="text" name="email" required>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" required>
            </div>

            <button type="submit" class="submit-btn">Sign In</button>
        </form>


        <!-- ================= TEACHER REGISTER FORM ================= -->
        <form id="teacherRegisterForm" method="POST" action="{% url 'teacher_register' %}" class="form">
            {% csrf_token %}

            <div class="form-group">
                <label>Full Name</label>
                <input type="text" name="name" required>
            </div>

            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" required>
            </div>

            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" name="confirm_password" required>
            </div>

            <button type="submit" class="submit-btn">Register as Teacher</button>
        </form>


        <!-- ================= STUDENT REGISTER FORM ================= -->
        <form id="studentRegisterForm" method="POST" action="{% url 'student_register' %}" class="form">
            {% csrf_token %}

            <div class="form-group">
                <label>Full Name</label>
                <input type="text" name="full_name" required>
            </div>

            <div class="form-group">
                <label>Email</label>
                <input type="email" name="email" required>
            </div>

            <div class="form-group">
                <label>Student ID</label>
                <input type="text" name="student_id" required>
            </div>

            <div class="form-group">
                <label>Select Class</label>
                <select name="class_group" required>
                    <option value="">-- Select Class --</option>
                    {% for group in class_groups %}
                        <option value="{{ group.id }}">{{ group.name }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input type="password" name="password" required>
            </div>

            <div class="form-group">
                <label>Confirm Password</label>
                <input type="password" name="confirm_password" required>
            </div>

            <button type="submit" class="submit-btn">Register as Student</button>
        </form>
    </div>
    </div>
</div>

<!-- ================= JAVASCRIPT ================= -->
<script>
    function switchTab(event, tab) {

        // Remove active class from tabs
        document.querySelectorAll('.tab').forEach(button => {
            button.classList.remove('active');
        });

        // Add active class to clicked tab
        event.target.classList.add('active');

        // Hide all forms
        document.querySelectorAll('.form').forEach(form => {
            form.classList.remove('active');
        });

        // Show selected form
        if (tab === 'login') {
            document.getElementById('loginForm').classList.add('active');
        }
        else if (tab === 'teacherRegister') {
            document.getElementById('teacherRegisterForm').classList.add('active');
        }
        else if (tab === 'studentRegister') {
            document.getElementById('studentRegisterForm').classList.add('active');
        }
    }
</script>

</body>
</html>
