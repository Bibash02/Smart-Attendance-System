{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Profile - Smart Attendance</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@300;400;500;600;700;800&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/student_profile.css' %}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="page-header">
            <a href="{% url 'student_dashboard' %}" class="back-link">‚Üê Back to Dashboard</a>
            <h1>My Profile</h1>
            <p class="subtitle">Manage your personal information and preferences</p>
        </div>

        <!-- Profile Card -->
        <div class="profile-card">

            <div class="avatar-container">
                {% if profile.profile_image %}
                    <img src="{{ profile.profile_image.url }}" class="avatar">
                {% else %}
                    <div class="avatar">
                        {{ user.first_name|slice:":1"|upper }}{{ user.last_name|slice:":1"|upper }}
                    </div>
                {% endif %}
                <div class="avatar-badge">‚úì</div>
            </div>

            <h2 class="profile-name">
                {{ user.get_full_name|default:user.username }}
            </h2>

            <p class="profile-id">
                {{ profile.role }} ID: {{ user.id }}
            </p>
            
            <div class="profile-stats">
                <div class="stat-box">
                    <div class="stat-value">{{ attendance_percentage }}%</div>
                    <div class="stat-label">Attendance</div>
                </div>

                <div class="stat-box">
                    <div class="stat-value">{{ gpa|default:"N/A" }}</div>
                    <div class="stat-label">GPA</div>
                </div>

                <div class="stat-box">
                    <div class="stat-value">{{ subjects_count }}</div>
                    <div class="stat-label">Subjects</div>
                </div>

                <div class="stat-box">
                    <div class="stat-value">{{ day_streak }}</div>
                    <div class="stat-label">Day Streak</div>
                </div>
            </div>
            
            <a href="" class="change-photo-btn">
                üì∑ Change Photo
            </a>

        </div>
        <div>
            <!-- Main Content -->
            <div class="profile-main">
                <!-- Tabs -->
                <div class="tabs">
                    <button class="tab active" data-tab="personal">Personal Info</button>
                    <button class="tab" data-tab="academic">Academic Details</button>
                    <button class="tab" data-tab="settings">Settings</button>
                    <button class="tab" data-tab="security">Security</button>
                </div>

                <!-- Personal Info Tab -->
                <div class="tab-content active" id="personal">
                    <form method="POST">
                        {% csrf_token %}

                        <div class="form-section">
                            <h3 class="section-title">Basic Information</h3>
                            <div class="form-grid">

                                <div class="form-group">
                                    <label class="form-label">First Name</label>
                                    <input type="text" class="form-input" name="first_name"
                                        value="{{ user.first_name }}">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Last Name</label>
                                    <input type="text" class="form-input" name="last_name"
                                        value="{{ user.last_name }}">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" class="form-input" name="email"
                                        value="{{ user.email }}">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" class="form-input" name="phone"
                                        value="{{ profile.phone }}">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Role</label>
                                    <input type="text" class="form-input" value="{{ profile.role }}" disabled>
                                </div>

                                <div class="form-group full-width">
                                    <label class="form-label">Username</label>
                                    <textarea class="form-textarea" disabled>{{ user.username }}</textarea>
                                </div>

                            </div>

                            <div class="form-actions">
                                <button type="reset" class="btn btn-secondary">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3 class="section-title">Emergency Contact</h3>
                            <div class="form-grid">

                                <div class="form-group">
                                    <label class="form-label">Contact Name</label>
                                    <input type="text" class="form-input" name="emergency_name"
                                        value="{{ profile.emergency_name|default:'' }}">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Relationship</label>
                                    <input type="text" class="form-input" name="emergency_relation"
                                        value="{{ profile.emergency_relation|default:'' }}">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Contact Phone</label>
                                    <input type="tel" class="form-input" name="emergency_phone"
                                        value="{{ profile.emergency_phone|default:'' }}">
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Contact Email</label>
                                    <input type="email" class="form-input" name="emergency_email"
                                        value="{{ profile.emergency_email|default:'' }}">
                                </div>

                            </div>

                            <div class="form-actions">
                                <button type="reset" class="btn btn-secondary">Cancel</button>
                                <button type="submit" class="btn btn-primary">Save Changes</button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Academic Details Tab -->
                <div class="tab-content" id="academic">
                    <div class="form-section">
                        <h3 class="section-title">Academic Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Student ID</label>
                                <input type="text" class="form-input" value="STU-2024-001" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Program</label>
                                <input type="text" class="form-input" value="Computer Science" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Enrollment Year</label>
                                <input type="text" class="form-input" value="2024" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Semester</label>
                                <input type="text" class="form-input" value="Fall 2024" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Academic Advisor</label>
                                <input type="text" class="form-input" value="Dr. Williams" disabled>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Graduation</label>
                                <input type="text" class="form-input" value="May 2028" disabled>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Current Courses</h3>
                        <div class="settings-list">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Advanced Mathematics</h4>
                                    <p>Prof. Johnson ‚Ä¢ Mon, Wed, Fri 08:00-09:30</p>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Data Structures</h4>
                                    <p>Dr. Williams ‚Ä¢ Mon, Thu 10:00-11:30</p>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Web Development</h4>
                                    <p>Prof. Anderson ‚Ä¢ Mon, Thu 14:00-15:30</p>
                                </div>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Database Systems</h4>
                                    <p>Dr. Martinez ‚Ä¢ Tue, Fri 09:00-10:30</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content" id="settings">
                    <div class="form-section">
                        <h3 class="section-title">Notification Preferences</h3>
                        <div class="settings-list">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Email Notifications</h4>
                                    <p>Receive attendance alerts via email</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>SMS Alerts</h4>
                                    <p>Get text messages for important updates</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Class Reminders</h4>
                                    <p>Reminder 15 minutes before class</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Low Attendance Alerts</h4>
                                    <p>Notify when attendance drops below 75%</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" checked>
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Display Preferences</h3>
                        <div class="settings-list">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Dark Mode</h4>
                                    <p>Use dark theme for better viewing</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Compact View</h4>
                                    <p>Show more information in less space</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Security Tab -->
                <div class="tab-content" id="security">
                    <div class="form-section">
                        <h3 class="section-title">Change Password</h3>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label class="form-label">Current Password</label>
                                <input type="password" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">New Password</label>
                                <input type="password" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Confirm New Password</label>
                                <input type="password" class="form-input">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button class="btn btn-secondary">Cancel</button>
                            <button class="btn btn-primary">Update Password</button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Face Recognition</h3>
                        <div class="settings-list">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Face Data Registered</h4>
                                    <p>Last updated: January 10, 2024</p>
                                </div>
                                <button class="btn btn-primary">Update Face Data</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3 class="section-title">Session Management</h3>
                        <div class="settings-list">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <h4>Active Sessions</h4>
                                    <p>You are currently logged in on 2 devices</p>
                                </div>
                                <button class="btn btn-secondary">Manage Sessions</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.dataset.tab;
                
                tabs.forEach(t => t.classList.remove('active'));
                tabContents.forEach(tc => tc.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(targetTab).classList.add('active');
            });
        });
    </script>
</body>
</html>